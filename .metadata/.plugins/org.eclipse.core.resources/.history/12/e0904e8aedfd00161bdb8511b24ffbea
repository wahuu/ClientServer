package pl.server.ejb;

import java.util.List;

import javax.persistence.EntityManager;
import javax.persistence.PersistenceContext;
import javax.persistence.TypedQuery;

import pl.server.dto.Schedule;

public class ScheduleBeanImpl {
	@PersistenceContext
	private EntityManager em;

	public void addSchedule(Schedule connection) {
		em.persist(connection);
	}

	public void delete(Schedule connection) {
		connection = em.merge(connection);
		em.remove(connection);
	}

	public List<Schedule> getAll() {
		List<Schedule> resultList = em.createQuery("select s from Schedule s", Schedule.class).getResultList();
		return resultList;
	}

	public void update(Schedule connection) {
		em.merge(connection);
	}

	public List<Schedule> getByIp(String ip) {
		TypedQuery<Schedule> query = em.createQuery("Select s from Schedule s where c.ip = :ip",
				Schedule.class);
		query.setParameter("ip", ip);
		return query.getResultList();
	}
}
